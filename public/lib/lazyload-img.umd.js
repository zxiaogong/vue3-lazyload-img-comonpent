(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.lazyloadImg={},a.Vue))})(this,function(a,e){"use strict";const W="";let d={retryLoad:5};const z=s=>{d={...d,...s}},h=s=>(e.pushScopeId("data-v-a17e0516"),s=s(),e.popScopeId(),s),x={class:"err-root"},k=["width","height"],I=[h(()=>e.createElementVNode("path",{d:"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707v5.586l-2.73-2.73a1 1 0 0 0-1.52.127l-1.889 2.644-1.769-1.062a1 1 0 0 0-1.222.15L2 12.292V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zm-1.498 4a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"},null,-1)),h(()=>e.createElementVNode("path",{d:"M10.564 8.27 14 11.708V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-.293l3.578-3.577 2.56 1.536 2.426-3.395z"},null,-1))],B=e.defineComponent({__name:"loadDeafultErrImg",props:{boxSize:{type:Number,default:30}},setup(s){const t=s,r=n=>n*.45,o=e.ref(r(t.boxSize));return e.watch(()=>t.boxSize,(n,l)=>{o.value=r(n)}),(n,l)=>(e.openBlock(),e.createElementBlock("div",x,[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.value,height:o.value,fill:"currentColor",class:"bi bi-file-earmark-image-fill errColor",viewBox:"0 0 16 16"},I,8,k))]))}}),J="",p=(s,t)=>{const r=s.__vccOpts||s;for(const[o,n]of t)r[o]=n;return r},E=p(B,[["__scopeId","data-v-a17e0516"]]),w=["src"],C=e.defineComponent({__name:"loadErr",props:{boxSize:{type:Number,default:0},specialErrSrc:{type:Object||void 0,default:void 0}},setup(s){const t=s,r=t.specialErrSrc||d.errImg;return(o,n)=>typeof e.unref(r)=="string"?(e.openBlock(),e.createElementBlock("img",{key:0,src:e.unref(r),class:"defalut-img"},null,8,w)):e.unref(r)?(e.openBlock(),e.createBlock(e.unref(r),{key:2})):(e.openBlock(),e.createBlock(E,{key:1,"box-size":t.boxSize},null,8,["box-size"]))}}),K="",P=p(C,[["__scopeId","data-v-833401eb"]]),Q="",v=s=>(e.pushScopeId("data-v-eacdd0f4"),s=s(),e.popScopeId(),s),$={class:"pre-root"},L=[v(()=>e.createElementVNode("span",{class:"visually-hidden"},"Loading...",-1))],V=e.defineComponent({__name:"loadDeafultPreImg",props:{boxSize:{type:Number,default:30}},setup(s){const t=s,r=n=>{const l=n*.7,m=n*.12;return{width:l+"px",height:l+"px","font-size":m+"px"}},o=e.ref(r(t.boxSize));return e.watch(()=>t.boxSize,(n,l)=>{o.value=r(t.boxSize)}),(n,l)=>(e.openBlock(),e.createElementBlock("div",$,[e.createElementVNode("div",{class:e.normalizeClass(["spinner-grow","loadColor"]),style:e.normalizeStyle(o.value),role:"status"},null,4),e.createElementVNode("div",{class:e.normalizeClass(["spinner-border","loadColor"]),style:e.normalizeStyle(o.value),role:"status"},L,4)]))}}),Y="",N=p(V,[["__scopeId","data-v-eacdd0f4"]]),O=["src"],H=e.defineComponent({__name:"loadPre",props:{boxSize:{type:Number,default:0},specialPreSrc:{type:Object||void 0,default:void 0}},setup(s){const t=s,r=t.specialPreSrc||d.preImg;return(o,n)=>typeof e.unref(r)=="string"?(e.openBlock(),e.createElementBlock("img",{key:0,src:e.unref(r),class:"defalut-img"},null,8,O)):e.unref(r)?(e.openBlock(),e.createBlock(e.unref(r),{key:2})):(e.openBlock(),e.createBlock(N,{key:1,"box-size":t.boxSize},null,8,["box-size"]))}}),Z="",j=p(H,[["__scopeId","data-v-cc626453"]]),D=["title"],M={class:"defalut-img-box"},T=["src"],A=e.defineComponent({__name:"index",props:{src:{type:String,default:""},class:{type:String,default:""},title:{type:String,default:""},preSrc:{type:Object||void 0,default:void 0},errSrc:{type:Object||void 0,default:void 0}},setup(s){const t=s,r=e.ref("img-equal"),o=e.ref(null),n=e.ref(0),l=e.ref(2),m=e.ref("");let f=d.retryLoad&&d.retryLoad>0?d.retryLoad:1;const g=()=>new Promise((_,i)=>{try{const c=new Image;c.src=t.src,c.setAttribute("crossOrigin","Anonymous"),c.onload=u=>{c.width>c.height?r.value="img-max-height":c.width<c.height&&(r.value="img-max-width"),l.value=0,f=0,m.value=t.src,_(t.src)},c.onerror=u=>{f-=1,f?setTimeout(async()=>{await g()},1e3):(l.value=1,i(`${t.src} Invalid picture URL`))}}catch(c){l.value=1,f=0,i(c)}}),U=()=>{const _=new IntersectionObserver(i=>{l.value===2&&i[0].isIntersecting&&(g(),_.unobserve(o.value))},{threshold:0});_.observe(o.value)};return e.onMounted(()=>{var b;const _=document.body.scrollHeight,i=document.documentElement.clientHeight;new IntersectionObserver(ee=>{}).observe(o.value),_<=i&&((b=o==null?void 0:o.value)==null?void 0:b.offsetTop)<=i+300?g():U();const u=parseInt(getComputedStyle(o==null?void 0:o.value).getPropertyValue("height")),S=parseInt(getComputedStyle(o==null?void 0:o.value).getPropertyValue("width"));S>u?n.value=u:n.value=S}),(_,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([t.class||"defalut-img-root"]),ref_key:"imgBoxRef",ref:o,title:t.title},[e.createElementVNode("div",M,[l.value===2?(e.openBlock(),e.createBlock(j,{key:0,"box-size":n.value,specialPreSrc:t.preSrc},null,8,["box-size","specialPreSrc"])):l.value===1?(e.openBlock(),e.createBlock(P,{key:1,"box-size":n.value,specialErrSrc:t.errSrc},null,8,["box-size","specialErrSrc"])):(e.openBlock(),e.createElementBlock("img",{key:2,class:e.normalizeClass([t.class?r.value:"lazyload-img"]),src:m.value},null,10,T))])],10,D))}}),R="",y=p(A,[["__scopeId","data-v-3b90a101"]]),q={install:(s,t)=>{z(t),s.component("lazyload-img",y)}};a.LazyloadImg=y,a.default=q,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
